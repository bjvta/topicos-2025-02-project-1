# üìÜ (Clase 6) Jueves 16 de Octubre ‚Äì Revisi√≥n de Proyecto y Presentaci√≥n Refinada

---

# Revisi√≥n del d√≠a

- **Objetivo principal:** Revisar el avance del proyecto de cada equipo.
- **üî¥ MUY IMPORTANTE:** Verificar que el proyecto est√© dividido en **microservicios**.
- **üî¥ MUY IMPORTANTE:** Verificar que est√©n usando **colas** para manejar la concurrencia.
- Validaci√≥n de choques de horario y cupos implementada en Web/Mobile.
- Mensajes de error claros y descriptivos en la interfaz de usuario.
- Trazabilidad con `requestId` en los logs del sistema.

---

## üéØ Enfoque de la clase

Esta clase es principalmente de **revisi√≥n y retroalimentaci√≥n**. No habr√° contenido te√≥rico extenso, sino que nos enfocaremos en:

1. **Revisi√≥n del estado actual de cada proyecto.**
2. **Identificar √°reas de mejora** antes de avanzar a las pruebas de carga.
3. **Responder preguntas** y resolver dudas espec√≠ficas de implementaci√≥n.
4. **Preparar el terreno** para la siguiente fase: pruebas de rendimiento con JMeter.

---

## üìã Checklist de revisi√≥n

Durante la clase, revisaremos que cada equipo tenga implementado lo siguiente:

### Backend

- [ ] **Flujo as√≠ncrono completo:**
  - Eventos `SeatRequested ‚Üí SeatConfirmed/Rejected` funcionando.
  - Worker procesando solicitudes desde la cola.

- [ ] **Validaciones de negocio:**
  - Validaci√≥n de cupos disponibles.
  - Validaci√≥n de choques de horario (entre materias solicitadas y con materias ya inscritas).
  - Validaci√≥n de prerequisitos (opcional pero recomendado).

- [ ] **Idempotencia:**
  - Uso de `requestId` para evitar duplicados.
  - Verificaci√≥n de requests ya procesadas.

- [ ] **Manejo de errores:**
  - C√≥digos HTTP apropiados (409 para conflictos, 422 para validaciones, 500 para errores internos).
  - Mensajes de error descriptivos y estructurados en formato JSON.

- [ ] **Logs con trazabilidad:**
  - Todos los logs incluyen `requestId`.
  - Logs claros que permitan debuggear problemas.

### Frontend Web

- [ ] **Estados de inscripci√≥n:**
  - La UI muestra claramente: `PENDING`, `CONFIRMED`, `REJECTED`.

- [ ] **Manejo de estados asincr√≥nicos:**
  - Indicadores de carga (spinners, mensajes de "procesando...").
  - Comunicaci√≥n clara del estado PENDING al usuario.

- [ ] **Mensajes de error claros:**
  - Cupo lleno: mostrar mensaje espec√≠fico.
  - Choque de horario: indicar con qu√© materia choca.
  - Errores t√©cnicos: mensaje gen√©rico amigable.

- [ ] **Experiencia de usuario:**
  - Feedback visual apropiado para cada acci√≥n.
  - Dise√±o limpio y usable.

### Frontend Mobile

- [ ] **Flujo completo MVP:**
  - Login (simulado o real).
  - Ver lista de materias disponibles.
  - Inscribirse en materias.
  - Ver estado de inscripciones.

- [ ] **Manejo de concurrencia:**
  - Evitar m√∫ltiples toques accidentales.
  - Manejo de red inestable (retry strategy opcional).

- [ ] **Consistencia con Web:**
  - Los mismos estados y validaciones que en Web.
  - Mensajes de error consistentes.

### Integraci√≥n y funcionamiento

- [ ] **Flujo end-to-end:**
  - Desde el cliente (Web o Mobile) hasta la confirmaci√≥n/rechazo final.

- [ ] **Simulaci√≥n de concurrencia:**
  - Probar con m√∫ltiples usuarios simult√°neos (manual o con scripts).
  - Verificar que los cupos no se excedan (ejemplo: 20 requests ‚Üí 10 cupos ‚Üí solo 10 confirmadas).

- [ ] **Casos de prueba:**
  - Inscripci√≥n exitosa.
  - Inscripci√≥n con cupo lleno.
  - Inscripci√≥n con choque de horario.
  - Inscripci√≥n duplicada (idempotencia).

---

## üó£Ô∏è Preguntas gu√≠a para la revisi√≥n

Durante la clase, cada equipo responder√° brevemente:

1. **¬øQu√© funciona actualmente en el proyecto?**
   - Describe el flujo que ya est√° implementado.

2. **¬øQu√© desaf√≠os enfrentaste en el proyecto?**
   - Problemas t√©cnicos, decisiones de dise√±o, bugs dif√≠ciles.

3. **¬øC√≥mo el cliente se entera del cambio de estado?**
   - Soluci√≥n t√©cnica que se est√° utilizando

4. **¬øQu√© falta por implementar o mejorar?**
   - Ser honesto sobre lo que a√∫n no est√° listo.

5. **¬øHay alg√∫n blocker que necesitas resolver?**
   - Dudas t√©cnicas, dependencias externas, etc.

6. **¬øC√≥mo planeas abordar las pruebas de carga con JMeter?**
   - ¬øYa pensaste en el escenario de prueba?

---

## üîç Conceptos clave a recordar (resumen r√°pido)

Aunque esta clase es de revisi√≥n, es importante tener presentes estos conceptos fundamentales que hemos visto hasta ahora:

### 1. Concurrencia y cupos limitados

- **Race conditions:** cuando m√∫ltiples usuarios compiten por el mismo recurso (cupos).
- **Soluci√≥n:** procesamiento secuencial mediante colas (Producer-Consumer pattern).

### 2. Flujo as√≠ncrono

- **Estados:** `PENDING ‚Üí CONFIRMED/REJECTED`.
- **Estado eventual:** garant√≠a de que el sistema eventualmente llegar√° a un estado final.

### 3. Idempotencia

- **requestId:** identificador √∫nico que permite detectar y evitar duplicados.
- **Beneficios:** evita inscripciones duplicadas, facilita el debugging.

### 4. Validaciones de negocio

- **Cupos disponibles:** verificar antes de confirmar.
- **Choques de horario:** validar tanto entre materias solicitadas como con materias ya inscritas.
- **Prerequisitos:** verificar que el estudiante cumpla con los requisitos previos.

### 5. Manejo de errores

- **C√≥digos HTTP apropiados:** 409 Conflict, 422 Unprocessable Entity, 500 Internal Server Error.
- **Mensajes claros:** descriptivos, accionables, contextualizados y amigables.

### 6. Tolerancia a fallos

- **Atomicidad:** en inscripciones m√∫ltiples, garantizar que todas se procesen de manera consistente.
- **Circuit breakers y retries:** estrategias avanzadas para manejar fallos (opcional).

---

## üìä Vista previa: JMeter y pruebas de carga

En la siguiente clase comenzaremos con **pruebas de rendimiento** usando JMeter. Para prepararte, ten en cuenta:

### ¬øQu√© es JMeter?

**Apache JMeter** es una herramienta open-source para realizar pruebas de carga y medir el rendimiento de aplicaciones.

### ¬øPor qu√© es importante?

- **Simula usuarios concurrentes:** puedes probar c√≥mo se comporta tu sistema con 50, 100, 500 usuarios simult√°neos.
- **Identifica cuellos de botella:** descubres qu√© partes del sistema son m√°s lentas.
- **Valida la arquitectura:** confirma que tu dise√±o de colas y workers realmente maneja la concurrencia correctamente.

### M√©tricas clave que mediremos

1. **Latencia promedio:** tiempo que tarda una request en completarse.
2. **Throughput:** n√∫mero de requests procesadas por segundo.
3. **Tasa de √©xito:** porcentaje de requests exitosas vs fallidas.
4. **Percentiles (p95, p99):** latencia para el 95% y 99% de los usuarios (opcional pero recomendado).

### Escenario de prueba t√≠pico

```
Configuraci√≥n JMeter:
- 50-100 usuarios concurrentes
- Cada usuario intenta inscribirse en una materia con cupos limitados
- Ejemplo: 100 usuarios ‚Üí 20 cupos disponibles
- Resultado esperado: 20 confirmadas, 80 rechazadas
- Verificar que no se excedan los cupos
```

### M√≠nimo obligatorio para el Martes 21 Oct

- Crear plan JMeter b√°sico con 50-100 usuarios concurrentes.
- Reportar:
  - Latencia promedio.
  - Tasa de √©xito.
  - Confirmar que no se rompen los cupos.

---

## üí° Consejos antes de la siguiente fase

### 1. Estabiliza lo que tienes

Antes de avanzar a pruebas de carga, aseg√∫rate de que tu sistema funciona correctamente con pocos usuarios. Si algo falla con 2-3 usuarios, fallar√° mucho m√°s con 100.

### 2. Implementa logs robustos

Los logs ser√°n tu mejor amigo durante las pruebas de carga. Aseg√∫rate de que:
- Todos los eventos importantes est√©n logueados.
- Cada log incluya `requestId` para trazabilidad.
- Los logs no sean demasiado verbosos (evita loguear en loops con miles de iteraciones).

### 3. Prueba manualmente primero

Antes de usar JMeter, prueba manualmente los casos extremos:
- ¬øQu√© pasa si 5 personas intentan tomar el √∫ltimo cupo?
- ¬øQu√© pasa si alguien env√≠a la misma request 3 veces seguidas?
- ¬øQu√© pasa si el worker se cae mientras procesa solicitudes?

### 4. Documenta tus decisiones

A medida que implementas, documenta:
- ¬øPor qu√© elegiste esa estructura de cola?
- ¬øPor qu√© decidiste validar los horarios de esa manera?
- ¬øQu√© trade-offs consideraste?

Esto te ayudar√° en la presentaci√≥n final.

### 5. No reinventes la rueda

Si algo es complicado, busca referencias:
- Ejemplos de validaci√≥n de horarios.
- Patrones de idempotencia.
- Configuraciones de JMeter.

Est√° bien inspirarse en c√≥digo existente (con atribuci√≥n apropiada).

---

## üéØ Tarea para la siguiente clase (Martes 21 Oct)

### M√≠nimo obligatorio

1. **Crear un plan de prueba JMeter:**
   - Configurar 50-100 usuarios concurrentes.
   - Simular inscripciones en una materia con cupos limitados (ejemplo: 20 cupos).

2. **Ejecutar la prueba y recopilar m√©tricas:**
   - Latencia promedio.
   - Tasa de √©xito (confirmadas vs rechazadas).
   - Verificar que no se excedan los cupos.

3. **Preparar un reporte b√°sico:**
   - Capturas de pantalla de JMeter.
   - Resultados num√©ricos (latencia, throughput, tasa de √©xito).
   - Observaciones: ¬øel sistema se comport√≥ como esperabas?

### Opcional (recomendado)

- Reportar percentiles (p95, p99).
- Graficar latencia vs n√∫mero de usuarios.
- Probar con diferentes escenarios (50, 100, 200 usuarios).
- Identificar cuellos de botella en tu sistema.

---

## üìö Recursos √∫tiles

### Documentaci√≥n de JMeter

- [Apache JMeter - Getting Started](https://jmeter.apache.org/usermanual/get-started.html)
- [JMeter Tutorial - Building a Web Test Plan](https://jmeter.apache.org/usermanual/build-web-test-plan.html)

### Tutoriales y gu√≠as

- [JMeter Load Testing Tutorial](https://www.blazemeter.com/blog/jmeter-tutorial)
- [How to Analyze JMeter Results](https://www.blazemeter.com/blog/how-to-analyze-jmeter-results)

### Herramientas complementarias

- [JMeter Plugins](https://jmeter-plugins.org/) - extensiones √∫tiles para gr√°ficos y reportes avanzados.

---

## ü§î Preguntas frecuentes

### ¬øQu√© pasa si mi sistema no est√° listo para pruebas de carga?

No hay problema. Primero estabiliza tu implementaci√≥n. Es mejor tener un sistema funcionando bien con pocos usuarios que uno que falla con 100.

### ¬øTengo que usar JMeter o puedo usar otra herramienta?

Recomendamos JMeter porque es la herramienta est√°ndar en la industria y tiene una comunidad enorme. Pero si ya conoces otra herramienta (Gatling, Locust, K6), puedes usarla.

### ¬øC√≥mo s√© si mi sistema pas√≥ la prueba?

Un sistema exitoso debe:
1. No exceder los cupos disponibles (ejemplo: 20 cupos ‚Üí m√°ximo 20 confirmadas).
2. Responder en un tiempo razonable (latencia < 2-3 segundos es aceptable para este proyecto).
3. No mostrar errores 500 (errores internos del servidor).

### ¬øQu√© hago si descubro que mi sistema es lento?

Identifica el cuello de botella:
- ¬øEs el worker que procesa muy lento?
- ¬øEs la base de datos que no da abasto?
- ¬øEs el sistema de colas?

Luego optimiza esa parte espec√≠fica. En la siguiente clase hablaremos m√°s de esto.

---

## üéì Reflexi√≥n final

Esta clase es un **checkpoint** importante en el proyecto. Es el momento de:

1. **Evaluar d√≥nde est√°s** con respecto a los objetivos del proyecto.
2. **Identificar qu√© falta** y priorizar esas tareas.
3. **Prepararte para la fase de pruebas** que viene en las pr√≥ximas clases.

**Recuerda:** el objetivo no es tener un sistema perfecto, sino un sistema que **funcione correctamente** y que demuestre tu comprensi√≥n de los conceptos de concurrencia, estado eventual, y manejo de errores.

---

## üìÖ Pr√≥xima clase: Martes 21 de Octubre

**Tema:** Introducci√≥n a JMeter y pruebas de carga b√°sicas.

**Entregable a revisar:**
- Script JMeter configurado.
- Reporte b√°sico con m√©tricas de latencia y tasa de √©xito.
- Validaci√≥n de que los cupos no se exceden bajo carga.

---

¬°Nos vemos en la pr√≥xima clase!
